<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Controle de Estoque de Agregados v2.6</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />
    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container py-4">
      <div class="card p-4">
        <div class="d-flex flex-wrap align-items-center justify-content-between mb-3 gap-2">
          <div>
            <h3 class="mb-0">Controle de Estoque de Agregados</h3>
            <div class="small-muted">Unidade: toneladas (ton) — Estoque mínimo padrão: <strong>50 ton</strong></div>
          </div>
          <div class="text-end">
            <button id="btnExportCsv" class="btn btn-outline-success btn-sm">Exportar CSV</button>
            <button id="btnRelatorio" class="btn btn-info btn-sm">Gerar Relatório PDF</button> <button id="btnHistory" class="btn btn-secondary btn-sm">Ver Histórico</button>
            <button id="btnReset" class="btn btn-outline-danger btn-sm">Resetar Estoque</button>
          </div>
        </div>

        <div class="row g-2 mb-3 align-items-end">
          <div class="col-md-5"><input id="searchInput" class="form-control" placeholder="Pesquisar produto (ex: areia, pedra...)" /></div>
          <div class="col-md-3"><select id="filterSelect" class="form-select"><option value="all">Todos os itens</option><option value="low">Abaixo do mínimo</option><option value="ok">Acima do mínimo</option></select></div>
          <div class="col-md-2 text-md-end"><small class="small-muted">Total em estoque:</small><div id="totalDisplay" class="fw-bold h5 mb-0">0,00 ton</div></div>
          <div class="col-md-2 text-md-end"><small class="small-muted">Valor Total:</small><div id="totalValueDisplay" class="fw-bold h5 mb-0">R$ 0,00</div></div>
        </div>

        <div class="table-responsive" id="table-wrapper"></div>

        <div class="mt-3 d-flex gap-2">
          <button id="btnAddProduct" class="btn btn-primary btn-sm">Adicionar Produto</button>
          <button id="btnSetMinAll" class="btn btn-outline-primary btn-sm">Definir mínimo p/ todos</button>
        </div>
      </div>
    </div>

    <div class="modal fade" id="editorModal" tabindex="-1" aria-hidden="true"> <div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="editorModalLabel">Editar</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div class="mb-2"><label class="form-label">Produto</label><input id="editorName" class="form-control" /></div><div class="mb-3"><label class="form-label">Preço por Tonelada (R$)</label><input id="editorPrice" class="form-control" inputmode="decimal" placeholder="ex: 150.50" /></div><hr><div class="mb-2"><label class="form-label">Ação de Estoque</label><select id="editorAction" class="form-select"><option value="add">Adicionar</option><option value="remove">Remover</option><option value="set">Definir quantidade</option><option value="setMin">Alterar mínimo</option></select></div><div class="mb-3"><label class="form-label">Quantidade (ton)</label><input id="editorValue" class="form-control" inputmode="decimal" placeholder="ex: 12.5" /><div class="form-text small-muted">Use ponto ou vírgula como separador decimal.</div></div></div><div class="modal-footer"><button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Cancelar</button><button id="editorSave" type="button" class="btn btn-primary btn-sm">Salvar</button></div></div></div></div>
    <div class="modal fade" id="confirmationModal" tabindex="-1" aria-hidden="true"> <div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="confirmationModalLabel">Confirmar Ação</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><p id="confirmationModalBody"></p></div><div class="modal-footer"><button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancelar</button><button id="confirmationModalConfirm" type="button" class="btn btn-danger btn-sm">Confirmar</button></div></div></div></div>
    <div class="modal fade" id="historyModal" tabindex="-1" aria-hidden="true"> <div class="modal-dialog modal-lg modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="historyModalLabel">Histórico de Movimentações</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div id="historyTableWrapper"></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Fechar</button></div></div></div></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    
    <script src="script.js"></script>
  </body>
</html>